<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="Chawp - Sleek Food Delivery">
    <meta name="author" content="VON">
    <meta name="theme-color" content="#2c2c2c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="icon" type="image/png" href="img/icon-192x192.png">
    <link rel="apple-touch-icon" href="img/icon-192x192.png">
    <title>Chawp</title>
    <link rel="preload" href="css/style.css?ver=1.0.1" as="style">
    <link rel="preload" href="img/icon-192x192.png" as="image">
    <link href="vendor/icons/feather.css?ver=1.0.1" rel="stylesheet" type="text/css">
    <link href="vendor/bootstrap/css/bootstrap.min.css?ver=1.0.1" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link href="css/style.css?ver=1.0.1" rel="stylesheet">
<link rel="stylesheet" href="css/index.css">

</head>
<body class="fixed-bottom-bar" style="background: #2c2c2c;">
    <div class="osahan-home-page" id="main-content">
        <div class="welcome-header">
            <div class="title d-flex align-items-center justify-content-center">
                <h1 id="welcome-message">Hi!</h1>
            </div>
            <p>Abi you dey hung?</p>
        </div>
        <!-- Banner removed for now
<div class="promo-banner" onclick="location.href='home.html'">
    <h3>Swift Delivery, At Your Door!</h3>
    <p>Order now and enjoy delicious food in minutes.</p>
</div> 
-->

<div class="promo-banner" onclick="location.href='home.html'">
    <h3>Shops Open Soon! ðŸŽ‰</h3>
    <p><strong>Please donâ€™t place any orders until then â€” <br>Weâ€™re getting everything ready for you!</strong></p>
</div>


        <div class="trending-section">
            <div class="container">
                <div class="all">
                <div class="d-flex align-items-center">
                    <h5 class="trending-text">Trending Now ðŸ”¥</h5>
                    <a class="fw-bold ms-auto text-white" href="home.html">All <i class="feather-chevrons-right"></i></a>
                </div>
                <div class="offline-notice">
                    Youâ€™re offline. Check your connection.
                </div>
                <div class="network-slow-notice">
                    Slow Network Detected...
                </div>
                <div id="trending-list" class="trending-list">
                    
                </div>
            </div>
            </div>
        </div>
    </div>

    <div class="osahan-menu-fotter fixed-bottom bg-darks px-3 py-2 text-center">
        <div class="row">
            <div class="col">
                <div class="footer-item selected">
                    <a href="index.html" class="text-danger small fw-bold text-decoration-none">
                        <p class="h4 m-0"><i class="feather-map-pin text-danger"></i></p>Trending
                    </a>
                </div>
            </div>
            <div class="col">
                <div class="footer-item">
                    <a href="home.html" class="text-white small fw-bold text-decoration-none">
                        <p class="h4 m-0"><i class="feather-home text-white"></i></p>Home
                    </a>
                </div>
            </div>
            <div class="col">
                <div class="footer-item">
                    <a href="cart.html" class="text-white small fw-bold text-decoration-none">
                        <p class="h4 m-0"><i class="feather-shopping-cart"></i></p>Cart
                    </a>
                </div>
            </div>
            <div class="col">
                <div class="footer-item">
                    <a href="orders.html" class="text-white small fw-bold text-decoration-none">
                        <p class="h4 m-0"><i class="feather-shopping-bag"></i></p>Orders
                    </a>
                </div>
            </div>
            <div class="col">
                <div class="footer-item">
                    <a href="profile.html" class="text-white small fw-bold text-decoration-none">
                        <p class="h4 m-0"><i class="feather-user"></i></p>Profile
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="ios-install-prompt" style="display: none;">
        <div class="ios-modal">
            <p class="title">Install the app</p>
            <div class="app-info">
                <img src="https://app.chawp.me/img/icon-192x192.png" alt="App Icon" />
                <div>
                    <p class="name">Chawp</p>
                    <p class="url">app.chawp.me</p>
                </div>
            </div>
            <ol>
                <li>
                    Press
                    <span class="share-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 25 27" width="18">
                            <path d="M0 0h24v24H0V0z" fill="none"/>
                            <path d="M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z" fill="white"/>
                        </svg>
                    </span>
                    in the browser menu
                </li>
                <li>Scroll down and tap <span class="btn">Add to Home Screen</span></li>
                <li>Look for the <img src="https://app.chawp.me/img/icon-192x192.png" style="height: 16px; vertical-align: middle;" /> icon on your home screen</li>
            </ol>
            <button onclick="closePrompt()">OK, Got it</button>
        </div>
    </div>

    <div id="android-install-prompt" style="display: none;">
        <div class="android-modal">
            <p class="title">Install the app</p>
            <div class="app-info">
                <img src="https://app.chawp.me/img/icon-192x192.png" alt="App Icon" />
                <div>
                    <p class="name">Chawp</p>
                    <p class="url">app.chawp.me</p>
                </div>
            </div>
            <ol>
                <li>Tap the <span class="btn">Menu</span> button in your browser (usually three dots)</li>
                <li>Select <span class="btn">Add to Home screen</span> or <span class="btn">Install app</span></li>
                <li>Look for the <img src="https://app.chawp.me/img/icon-192x192.png" style="height: 16px; vertical-align: middle;" /> icon on your home screen</li>
            </ol>
            <button onclick="closeAndroidPrompt()">OK, Got it</button>
        </div>
    </div>
    <div id="install-blur-overlay"></div>

<div id="page-loader">
  <div class="osahan-home-page" id="loader-content">
    
    <div class="welcome-header loaded">
      <div class="title d-flex align-items-center justify-content-center">
        <div class="skeleton-banner-text"></div>
      </div>
      <div class="skeleton-subtext"></div>
    </div>

    <div class="promo-banner loaded">
      <div class="skeleton-promo-title"></div>
      <div class="skeleton-promo-sub"></div>
    </div>

    <div class="trending-section loaded">
      <div class="container">
        <div class="all">
          <div class="d-flex align-items-center">
            <h5 class="trending-text">Trending Now ðŸ”¥</h5>
          </div>
          <div id="loader-trending-list" class="trending-list">
            <!-- Skeleton cards go here -->
            <div class="skeleton-card">
              <div class="skeleton-image"></div>
              <div class="skeleton-body">
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
              </div>
            </div>
            <div class="skeleton-card">
              <div class="skeleton-image"></div>
              <div class="skeleton-body">
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
              </div>
            </div>
            <div class="skeleton-card">
              <div class="skeleton-image"></div>
              <div class="skeleton-body">
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
              </div>
            </div>
            <div class="skeleton-card">
              <div class="skeleton-image"></div>
              <div class="skeleton-body">
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>




    <script type="module" src="js/index.js"></script>

    <script>
if ('serviceWorker' in navigator) {
  let refreshing = false;

  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/service-worker.js').then(reg => {
      console.log('âœ… Service Worker registered:', reg);

      reg.onupdatefound = () => {
        const newWorker = reg.installing;
        newWorker.onstatechange = () => {
          if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
            // New update available
            showUpdateToast(newWorker);
          }
        };
      };
    }).catch(err => console.error('âŒ SW registration failed:', err));
  });

  // Reload when the new service worker takes control
  navigator.serviceWorker.addEventListener('controllerchange', () => {
    if (!refreshing) {
      window.location.reload();
      refreshing = true;
    }
  });
}

function showUpdateToast(worker) {
  const toast = document.createElement('div');
  toast.textContent = 'ðŸ”„ New version available. Tap to refresh.';
  toast.style = `
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #1f2937;
    color: #f9fafb;
    padding: 14px 24px;
    border-radius: 9999px;
    font-size: 15px;
    font-weight: 500;
    z-index: 10000;
    cursor: pointer;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.3);
    opacity: 0;
    transform: translate(-50%, 20px);
    transition: all 0.3s ease-in-out;
  `;

  document.body.appendChild(toast);

  // Animate in
  setTimeout(() => {
    toast.style.opacity = '1';
    toast.style.transform = 'translate(-50%, 0)';
  }, 100);

  toast.onclick = () => {
    toast.style.opacity = '0';
    toast.style.transform = 'translate(-50%, 20px)';
    worker.postMessage({ action: 'skipWaiting' });
  };
}

  document.body.appendChild(toast);

</script>


    <script>
        function isIosSafari() {
            const ua = window.navigator.userAgent;
            const isIOS = /iPad|iPhone|iPod/.test(ua);
            const isSafari = /^((?!chrome|android).)*safari/i.test(ua);
            const isStandalone = ('standalone' in window.navigator) && window.navigator.standalone;

            return isIOS && isSafari && !isStandalone;
        }

        function closePrompt() {
    document.getElementById('ios-install-prompt').style.display = 'none';
    document.getElementById('install-blur-overlay').classList.remove('active');
}


        // Defer iOS prompt to reduce initial load impact
        window.addEventListener('load', () => {
            if (isIosSafari()) {
                setTimeout(() => {
                    const prompt = document.getElementById('ios-install-prompt');
                    const overlay = document.getElementById('install-blur-overlay');
prompt.style.display = 'block';
setTimeout(() => {
    prompt.classList.add('visible');
    overlay.classList.add('active');
}, 10);

                }, 10); // Delayed to prioritize content rendering
            }
        });
    </script>
    <script>
    let deferredPrompt;

    function isAndroidChrome() {
        const ua = window.navigator.userAgent;
        const isAndroid = /Android/i.test(ua);
        const isChrome = /Chrome/i.test(ua) && !/Edge/i.test(ua);
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
        return isAndroid && isChrome && !isStandalone;
    }

    function closeAndroidPrompt() {
        document.getElementById('android-install-prompt').style.display = 'none';
        document.getElementById('install-blur-overlay').classList.remove('active');
    }

    window.addEventListener('load', () => {
    if (isAndroidChrome()) {
        setTimeout(() => {
            const prompt = document.getElementById('android-install-prompt');
            const overlay = document.getElementById('install-blur-overlay');
            prompt.style.display = 'block';
            setTimeout(() => {
                prompt.classList.add('visible');
                overlay.classList.add('active');
            }, 10);
        }, 10); // Matches iOS timing
    }
});

</script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93784c4a5c7e678a',t:'MTc0NTg2MTUzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9378aae7d831bfb0',t:'MTc0NTg2NTQxMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9378f4460ae77221',t:'MTc0NTg2ODQxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93794d42db4badcc',t:'MTc0NTg3MjA2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9380160edd4431b6',t:'MTc0NTk0MzIwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93d1b904bd863382',t:'MTc0Njc5OTIyMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>



  <script src="/update-check.js"></script>
</body>
</html>